---
title: Using Role-Based Access Control
parent: Virtual Event
grandparent: Experiences
description: In this topic you will learn how to use role-based access control to restrict the sessions that appear in an event agenda based upon the user's role.
layout: staging
---
<h1>Using Role-Based Access Control</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <p>Role-based access control can be used to filter the sessions that appear in the session agenda based on a user's role. Role-based access control relies on a specified SAML attribute on the user object  returned by the user management system (i.e. registration system, SSO). Rules are defined based on user roles and session tags. Brightcove recommends that all sessions have at least one tag for the role-based filtering to occur.</p>
  </section>
  <section class="bcls-section">
    <h2 id="start">Before you get started</h2>
    <p>Before configuring role-based access control for a Virtual Event Experience, these initial setup steps should be completed:</p>
    <ol class="bcls-tasklist-restart" >
      <li>You should create a Virtual Event Experience and have created an event agenda.</li>
      <li>The Virtual Event Experience should be secured using an access control profile.</li>
    </ol>
    <aside class="bcls-aside bcls-aside--information">Note: The steps and images in this topic are using the <a href="https://auth0.com/signup?&signUpData=%7B%22category%22%3A%22button%22%7D&email=undefined">trial version</a> of Auth0.</aside>
    <aside class="bcls-aside bcls-aside--information">Note: For information on securing an experience using Auth0, see <a href="/settings/securing-portal-experience-auth0.html">Securing a Portal Experience with Auth0</a>.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="roles">Roles and tags</h2>
    <p>To configure role-based access control, start by determining how the sessions will be restricted and then create the appropriate role-based access tags that will be assigned to each user and each session. For example, you may decide to use the following roles/tags:</p>
    <ul>
      <li>standard</li>
      <li>enterprise</li>
      <li>vip</li>
    </ul>
    Users in your SSO will be assigned one these roles and all agenda sessions will be tagged with one or more of these values. Role-based access control will  filter the agenda so  users only see the  sessions they have access to. For example, a user with a role of &quot;<strong>standard</strong>&quot; will only see sessions that are tagged &quot;<strong>standard</strong>&quot;.</section>
  <section class="bcls-section">
    <h2 id="assign-roles">Assigning roles to users in Auth0</h2>
    <p>All users in your SSO should be assigned a role. Follow these steps  to assign roles to users using Auth0 SSO.</p>
    <ol class="bcls-tasklist-restart">
      <li>Login to  your Auth0 account.</li>
      <li>In the left navigation, click <strong> User Management &gt; Users</strong>.</li>
      <li>Click on a user to view the user details.</li>
      <li>Assign the appropriate role to the user in the <strong>user_metadata</strong> section. Roles should be entered using the format <code>"role": assigned role</code>.
        <p>In the following example, the user is assigned a <strong>role</strong> of <strong>vip</strong>.</p>
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-auth0-role.png" /></figure>
      </li>
      <li>Click <strong>Save</strong>.</li>
      <li>Assign roles to all users.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="pass-roles">Passing roles as SAML data  in Auth0</h2>
    <p>In order to pass the role metadata from Auth0 to an experience, a rule needs to be created. A rule is  JavaScript code that can be used to extend Auth0's default behavior when authenticating a user. Follow these steps to create a rule to pass the role data.</p>
    <ol class="bcls-tasklist-restart">
      <li>Login to  your Auth0 account.</li>
      <li>In the left navigation, click <strong> Auth Pipeline &gt; Rules</strong>.</li>
      <li>Click <strong>+ Create</strong>.</li>
      <li>Click <strong>&lt; &gt; Empty rule</strong>.</li>
      <li>Enter a <strong>Name</strong> for the rule.</li>
      <li>Paste the following code into the <strong>Script</strong> area.
        <pre class="line-numbers"><code class="language-javascript" translate="No">
function mapSamlAttributes(user, context, callback) {
  context.samlConfiguration.mappings = {
    'role': 'role',
  };

  callback(null, user, context);
}
</code></pre>
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-auth0-rule.png" /></figure>
      </li>
      <li>Click <strong>Save changes</strong>.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="assign-roles-sessions">Controlling access to event sessions</h2>
    <p>Access Control tags are used to restrict access to sessions. If a session has an <strong>Access Control tag</strong> of <strong>vip</strong>, the session will only appear for users with a <strong>role</strong> of <strong>vip</strong>. Follow these steps to assign an Access Control tag to a session.</p>
    <ol class="bcls-tasklist">
      <li>Open the <strong>Gallery</strong> module.</li>
      <li>Edit the experience.</li>
      <li>Click <strong>Site Features &gt;Agenda</strong> in the left navigation.</li>
      <li>Click on the event agenda to open the agenda editor.</li>
      <li>Click on a session.</li>
      <li>In the <strong>Access Control tags</strong> field, enter the role(s) who have access to the session. In the following example, only users with the role <strong>vip</strong> will see this session in the agenda.
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-session-access.png" /></figure>
      </li>
      <li>Click <span class="button-blue">Save</span>.</li>
    </ol>
        <aside class="bcls-aside bcls-aside--information">Note: The agenda must be activated before it will appear in a Virtual Event Experience.</aside>

  </section>
  <section class="bcls-section">
    <h2 id="attributes">Exposing SAML attributes</h2>
    <p>In order for the experience to access the role attribute  from your SSO/registration system provider, ensure that the SSO settings are configured correctly.</p>
    <ol class="bcls-tasklist">
      <li>Open the Gallery module.</li>
      <li>Click the settings icon (<img class="bcls-image--no-border" alt="" src="/assets/images/get-started/icon-settings.png" />)  on the home page.</li>
      <li>In the left navigation, click <strong>Access Control Profiles</strong>. A list of created Access Control Profiles will be displayed.</li>
      <li>Click the edit icon for the profile the Virtual Event Experience is using.</li>
      <li>Confirm that the <strong>Expose all attributes</strong> option at the bottom of the page is checked.
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="" src="/assets/images/experiences/virtual-event/rbac-expose-attributes.png" /></figure>
      </li>
      <li>Click<strong> Save</strong>.</li>
    </ol>
    <p>Make sure you republish the experience so the changes appear.</p>
  </section>
</article>
